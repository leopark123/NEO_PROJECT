# NEO é€šé“è®¾ç½®ä¸å¢ç›Šæ§åˆ¶é€»è¾‘è¯¦ç»†è¯´æ˜

> **æ–‡æ¡£ç‰ˆæœ¬**: 2.0
> **æœ€åæ›´æ–°**: 2026-02-08
> **é€‚ç”¨èŒƒå›´**: UI Phase 3 æ³¢å½¢æ¸²æŸ“ç³»ç»Ÿï¼ˆæ¯é€šé“ç‹¬ç«‹é…ç½®ï¼‰
> **é‡å¤§æ›´æ–°**: æ–°å¢æ¯EEGé€šé“ç‹¬ç«‹Source/Gain/Rangeé…ç½®

---

## ğŸ“‹ ç›®å½•

1. [æ¯EEGé€šé“ç‹¬ç«‹é…ç½®æ¨¡å‹](#1-æ¯eegé€šé“ç‹¬ç«‹é…ç½®æ¨¡å‹)
2. [é€šé“æºé€‰æ‹©é€»è¾‘](#2-é€šé“æºé€‰æ‹©é€»è¾‘)
3. [æ¯é€šé“å¢ç›Šä¸èŒƒå›´](#3-æ¯é€šé“å¢ç›Šä¸èŒƒå›´)
4. [æ•°æ®æµå‘å›¾](#4-æ•°æ®æµå‘å›¾)
5. [ä»£ç å®ç°æ£€æŸ¥](#5-ä»£ç å®ç°æ£€æŸ¥)
6. [è§„æ ¼ç¬¦åˆæ€§éªŒè¯](#6-è§„æ ¼ç¬¦åˆæ€§éªŒè¯)
7. [å‘åå…¼å®¹æ€§](#7-å‘åå…¼å®¹æ€§)

---

## 1. æ¯EEGé€šé“ç‹¬ç«‹é…ç½®æ¨¡å‹

### 1.1 æ–°æ¨¡å‹æ¦‚è¿°ï¼ˆ2026-02-08ï¼‰

**æ¶æ„å˜æ›´**: ä»"å…¨å±€å¢ç›Š/èŒƒå›´"å‡çº§ä¸º"æ¯EEGé€šé“ç‹¬ç«‹Source/Gain/Range"

**é…ç½®ç»“æ„**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EEG-1 (é¡¶éƒ¨æ˜¾ç¤ºé€šé“)                                 â”‚
â”‚  â”œâ”€ Source: CH1 / CH2 / CH3 / CH4 (é€‰æ‹©ç‰©ç†é€šé“æ¥æº) â”‚
â”‚  â”œâ”€ Gain: 10-1000 Î¼V/cm (ç‹¬ç«‹å¢ç›Š)                  â”‚
â”‚  â””â”€ Range: Â±25-200 Î¼V (ç‹¬ç«‹Yè½´èŒƒå›´)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EEG-2 (åº•éƒ¨æ˜¾ç¤ºé€šé“)                                 â”‚
â”‚  â”œâ”€ Source: CH1 / CH2 / CH3 / CH4 (é€‰æ‹©ç‰©ç†é€šé“æ¥æº) â”‚
â”‚  â”œâ”€ Gain: 10-1000 Î¼V/cm (ç‹¬ç«‹å¢ç›Š)                  â”‚
â”‚  â””â”€ Range: Â±25-200 Î¼V (ç‹¬ç«‹Yè½´èŒƒå›´)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å…¨å±€è®¾ç½® (æ‰€æœ‰é€šé“å…±äº«)                              â”‚
â”‚  â”œâ”€ Filter: HPF / LPF / Notch                       â”‚
â”‚  â”œâ”€ Sweep: æ‰«ææ—¶é—´çª—å£                              â”‚
â”‚  â””â”€ aEEG Window: aEEGæ˜¾ç¤ºæ—¶é•¿                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ä¼˜åŠ¿**:
- âœ… æ¯ä¸ªEEGé€šé“å¯æ˜¾ç¤ºä¸åŒç‰©ç†æºï¼ˆCH1, CH2, CH3, CH4ï¼‰
- âœ… æ¯ä¸ªEEGé€šé“å¯è®¾ç½®ç‹¬ç«‹å¢ç›Šå’ŒYè½´èŒƒå›´
- âœ… çµæ´»å¯¹æ¯”ï¼šå¯åŒæ—¶æ˜¾ç¤º CH1@100Î¼V/cm + CH4@200Î¼V/cm
- âœ… è·¨å¯¼è”æ”¯æŒï¼šCH4 (C3-C4) æ ‡æ³¨ä¸º"è·¨å¯¼è”"

### 1.2 ç‰©ç†é€šé“æ˜ å°„

**ç¡¬ä»¶è§„æ ¼** (åè®®å›ºå®š):

| ç‰©ç†é€šé“ç´¢å¼• | å¯¼è” | ç”µæå¯¹ | SourceOptionsæ ‡ç­¾ |
|------------|------|--------|------------------|
| 0 | C3-P3 | A-B | CH1 (C3-P3) |
| 1 | C4-P4 | C-D | CH2 (C4-P4) |
| 2 | P3-P4 | B-C | CH3 (P3-P4) |
| 3 | C3-C4 | A-D | CH4 (C3-C4, è·¨å¯¼è”) |

**åè®®äº‹å®** (æ¥æº: ç”¨æˆ·æä¾›):
```
CH1 = C3-P3 (A-B)
CH2 = C4-P4 (C-D)
CH4 = C3-C4 (A-D, cross-channel/computed)
```

**SourceOptions å®ç°** (`WaveformViewModel.cs:33-38`):
```csharp
public static IReadOnlyList<ChannelSourceOption> SourceOptions { get; } =
[
    new("CH1 (C3-P3)", 0),              // Physical channel 0
    new("CH2 (C4-P4)", 1),              // Physical channel 1
    new("CH4 (C3-C4, è·¨å¯¼è”)", 3)      // Physical channel 3, computed/cross-channel
];
```

**è®¾è®¡å†³ç­–**:
- CH3 (P3-P4) å·²æš´éœ²ç»™UIï¼Œå¯ç”¨äºä¸¤è·¯æ˜¾ç¤ºä»»æ„æ˜ å°„
- CH4 æ ‡æ³¨"è·¨å¯¼è”"æç¤ºå…¶ä¸ºè·¨åŠçƒè®¡ç®—é€šé“

### 1.3 é»˜è®¤é…ç½®

**EEG-1 (é¡¶éƒ¨)**:
- Source: CH1 (C3-P3) - ç‰©ç†é€šé“ 0
- Gain: 100 Î¼V/cm
- Range: Â±100 Î¼V

**EEG-2 (åº•éƒ¨)**:
- Source: CH2 (C4-P4) - ç‰©ç†é€šé“ 1
- Gain: 100 Î¼V/cm
- Range: Â±100 Î¼V

**ä»£ç ä½ç½®** (`WaveformViewModel.cs:118-119`):
```csharp
Eeg1Source = SourceOptions[0];  // CH1
Eeg2Source = SourceOptions[1];  // CH2
```

---

## 2. é€šé“æºé€‰æ‹©é€»è¾‘

### 2.1 Source ä¸‹æ‹‰èœå•

**UI å®ç°** (`ChannelControlPanel.xaml:19-33`):

```xml
<!-- EEG-1 Source -->
<TextBlock Text="Source"/>
<ComboBox ItemsSource="{Binding SourceOptions}"
          SelectedItem="{Binding Eeg1Source, Mode=TwoWay}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Label}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox>

<!-- EEG-2 Source -->
<ComboBox ItemsSource="{Binding SourceOptions}"
          SelectedItem="{Binding Eeg2Source, Mode=TwoWay}">
    <!-- åŒä¸Š -->
</ComboBox>
```

**ç”¨æˆ·ä½“éªŒ**:
- æ¯ä¸ªEEGé€šé“ç‹¬ç«‹æ˜¾ç¤ºSourceä¸‹æ‹‰èœå•
- å¯é€‰: "CH1 (C3-P3)", "CH2 (C4-P4)", "CH4 (C3-C4, è·¨å¯¼è”)"
- ä¸¤ä¸ªé€šé“å¯é€‰æ‹©ç›¸åŒæºï¼ˆç”¨äºå¯¹æ¯”ä¸åŒå¢ç›Š/èŒƒå›´ï¼‰

### 2.2 Source å˜æ›´å¤„ç†

**ç›‘å¬ä½ç½®** (`WaveformPanel.xaml.cs:185-190`):

```csharp
case nameof(WaveformViewModel.Eeg1Source):
case nameof(WaveformViewModel.Eeg2Source):
    ApplyPerLaneChannelMapping(vm.Eeg1Source, vm.Eeg2Source);
    LogChannelMapChange(vm.Eeg1Source, vm.Eeg2Source);
    break;
```

**æ˜ å°„åº”ç”¨** (`WaveformPanel.xaml.cs:198-207`):

```csharp
private void ApplyPerLaneChannelMapping(
    ChannelSourceOption? eeg1Source,
    ChannelSourceOption? eeg2Source)
{
    if (_renderHost == null || eeg1Source == null || eeg2Source == null)
        return;

    // Display lane 0 (top) â†’ eeg1Source.PhysicalChannel
    // Display lane 1 (bottom) â†’ eeg2Source.PhysicalChannel
    _renderHost.DataBridge.SetChannelMapping(
        eeg1Source.PhysicalChannel,
        eeg2Source.PhysicalChannel);
}
```

### 2.3 å®¡è®¡äº‹ä»¶

**äº‹ä»¶ç±»å‹**: `CHANNEL_MAP_CHANGE` (æ–°å¢ 2026-02-08)

**è®°å½•å†…å®¹** (`WaveformPanel.xaml.cs:209-217`):
```csharp
private void LogChannelMapChange(
    ChannelSourceOption? eeg1Source,
    ChannelSourceOption? eeg2Source)
{
    if (_boundViewModel?.Audit == null ||
        eeg1Source == null || eeg2Source == null)
        return;

    string details = $"EEG-1: {eeg1Source.Label}, EEG-2: {eeg2Source.Label}";
    _boundViewModel.Audit.Log(AuditEventTypes.ChannelMapChange, details);
}
```

**å®¡è®¡ç¤ºä¾‹**:
```
CHANNEL_MAP_CHANGE | EEG-1: CH1 (C3-P3), EEG-2: CH4 (C3-C4, è·¨å¯¼è”)
```

---

## 3. æ¯é€šé“å¢ç›Šä¸èŒƒå›´

### 3.1 æ¯é€šé“Gainé…ç½®

**æ¡£ä½é€‰é¡¹** (ä¸å…¨å±€æ¨¡å¼ç›¸åŒ):

| æ¡£ä½ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| 10 Î¼V/cm | æé«˜çµæ•åº¦ | æä½å¹…åº¦ä¿¡å· |
| 20 Î¼V/cm | å¾ˆé«˜çµæ•åº¦ | ä½å¹…åº¦ä¿¡å· |
| 50 Î¼V/cm | é«˜çµæ•åº¦ | å¸¸è§„ä½å¹…åº¦ |
| 70 Î¼V/cm | ä¸­é«˜çµæ•åº¦ | - |
| **100 Î¼V/cm** | **æ ‡å‡†çµæ•åº¦ï¼ˆé»˜è®¤ï¼‰** | å¸¸è§„ç›‘æµ‹ |
| 200 Î¼V/cm | ä½çµæ•åº¦ | é«˜å¹…åº¦ä¿¡å· |
| 1000 Î¼V/cm | æä½çµæ•åº¦ | æé«˜å¹…åº¦ä¿¡å·/ä¼ªè¿¹æŠ‘åˆ¶ |

**UI å®ç°** (`ChannelControlPanel.xaml:35-49`):

```xml
<!-- EEG-1 Gain -->
<TextBlock Text="Gain"/>
<ComboBox ItemsSource="{Binding GainOptions}"
          SelectedItem="{Binding Eeg1Gain, Mode=TwoWay}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding StringFormat={}{0} uV/cm}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox>

<!-- EEG-2 Gain: ç±»ä¼¼ç»“æ„ï¼Œç»‘å®šåˆ° Eeg2Gain -->
```

### 3.2 æ¯é€šé“Rangeé…ç½®

**èŒƒå›´é€‰é¡¹**:

| èŒƒå›´ | è¯´æ˜ |
|------|------|
| Â±25 Î¼V | æå°èŒƒå›´ï¼ˆç²¾ç»†è§‚å¯Ÿï¼‰ |
| Â±50 Î¼V | å°èŒƒå›´ |
| **Â±100 Î¼V** | **æ ‡å‡†èŒƒå›´ï¼ˆé»˜è®¤ï¼‰** |
| Â±200 Î¼V | å¤§èŒƒå›´ |

**UI å®ç°** (`ChannelControlPanel.xaml:51-65`):

```xml
<!-- EEG-1 Range -->
<TextBlock Text="Range"/>
<ComboBox ItemsSource="{Binding YAxisOptions}"
          SelectedItem="{Binding Eeg1Range, Mode=TwoWay}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding StringFormat={}+/-{0} uV}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox>

<!-- EEG-2 Range: ç±»ä¼¼ç»“æ„ï¼Œç»‘å®šåˆ° Eeg2Range -->
```

### 3.3 Gain/Rangeå˜æ›´å¤„ç†

**ç›‘å¬ä½ç½®** (`WaveformPanel.xaml.cs:192-217`):

```csharp
case nameof(WaveformViewModel.Eeg1Gain):
    _renderHost.Lane0GainMicrovoltsPerCm = vm.Eeg1Gain;
    _renderHost.GainMicrovoltsPerCm = vm.Eeg1Gain; // å‘åå…¼å®¹
    break;
case nameof(WaveformViewModel.Eeg2Gain):
    _renderHost.Lane1GainMicrovoltsPerCm = vm.Eeg2Gain;
    break;
case nameof(WaveformViewModel.Eeg1Range):
    _renderHost.Lane0YAxisRangeUv = vm.Eeg1Range;
    _renderHost.YAxisRangeUv = vm.Eeg1Range; // å‘åå…¼å®¹
    break;
case nameof(WaveformViewModel.Eeg2Range):
    _renderHost.Lane1YAxisRangeUv = vm.Eeg2Range;
    break;
```

### 3.4 RenderHost æ¯é€šé“å­˜å‚¨

**ä½ç½®** (`WaveformRenderHost.cs:79-91`):

```csharp
// Per-lane gain settings (Î¼V/cm) â€” default 100
private int _lane0GainMicrovoltsPerCm = 100;  // EEG-1 (top lane)
private int _lane1GainMicrovoltsPerCm = 100;  // EEG-2 (bottom lane)

// Per-lane Y-axis range (Â±Î¼V) â€” default 100
private int _lane0YAxisRangeUv = 100;  // EEG-1 (top lane)
private int _lane1YAxisRangeUv = 100;  // EEG-2 (bottom lane)

// Legacy global properties (deprecated, kept for backward compatibility)
[Obsolete("Use Lane0GainMicrovoltsPerCm and Lane1GainMicrovoltsPerCm instead")]
private int _gainMicrovoltsPerCm = 100;

[Obsolete("Use Lane0YAxisRangeUv and Lane1YAxisRangeUv instead")]
private int _yAxisRangeUv = 100;
```

**å…¬å¼€å±æ€§** (`WaveformRenderHost.cs:140-195`):

```csharp
public int Lane0GainMicrovoltsPerCm { get; set; }
public int Lane1GainMicrovoltsPerCm { get; set; }
public int Lane0YAxisRangeUv { get; set; }
public int Lane1YAxisRangeUv { get; set; }

// [Obsolete] GainMicrovoltsPerCm - è®¾ç½®æ—¶åŒæ­¥æ›´æ–°ä¸¤ä¸ªé€šé“
// [Obsolete] YAxisRangeUv - è®¾ç½®æ—¶åŒæ­¥æ›´æ–°ä¸¤ä¸ªé€šé“
```

### 3.5 æ¸²æŸ“åº”ç”¨

**ä½ç½®** (`WaveformRenderHost.cs:308-323`):

```csharp
// EEG Preview Ch1 (5%) - narrow strip with waveform (Lane 0 / EEG-1)
if (sweepData.Length >= 1)
{
    _sweepRenderer.RenderChannel(_renderer.DeviceContext, _resourceCache,
        sweepData[0], _layout.EegPreview1,
        _lane0YAxisRangeUv,            // â† ä½¿ç”¨Lane 0çš„Range
        _lane0GainMicrovoltsPerCm);    // â† ä½¿ç”¨Lane 0çš„Gain
}

// EEG Preview Ch2 (5%) - narrow strip with waveform (Lane 1 / EEG-2)
if (sweepData.Length >= 2)
{
    _sweepRenderer.RenderChannel(_renderer.DeviceContext, _resourceCache,
        sweepData[1], _layout.EegPreview2,
        _lane1YAxisRangeUv,            // â† ä½¿ç”¨Lane 1çš„Range
        _lane1GainMicrovoltsPerCm);    // â† ä½¿ç”¨Lane 1çš„Gain
}
```

**å…³é”®å˜æ›´**: ä»å…¨å±€ `_yAxisRangeUv` / `_gainMicrovoltsPerCm` æ”¹ä¸ºæ¯é€šé“ç‹¬ç«‹å‚æ•°

---

## 4. æ•°æ®æµå‘å›¾

### 4.1 Sourceé€‰æ‹©æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·äº¤äº’å±‚                             â”‚
â”‚  EEG-1: Sourceä¸‹æ‹‰ | EEG-2: Sourceä¸‹æ‹‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ TwoWay Binding
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WaveformViewModel.cs                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ [ObservableProperty]                   â”‚              â”‚
â”‚  â”‚ private ChannelSourceOption?           â”‚              â”‚
â”‚  â”‚   _eeg1Source;  // Default: CH1        â”‚              â”‚
â”‚  â”‚ private ChannelSourceOption?           â”‚              â”‚
â”‚  â”‚   _eeg2Source;  // Default: CH2        â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ PropertyChanged Event
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WaveformPanel.xaml.cs                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ OnWaveformPropertyChanged(...)         â”‚              â”‚
â”‚  â”‚ {                                      â”‚              â”‚
â”‚  â”‚   case Eeg1Source / Eeg2Source:        â”‚              â”‚
â”‚  â”‚     ApplyPerLaneChannelMapping(...);   â”‚              â”‚
â”‚  â”‚     LogChannelMapChange(...);          â”‚              â”‚
â”‚  â”‚ }                                      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ SetChannelMapping(phys0, phys1)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EegDataBridge.cs                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ private int[] _channelMapping = [0,1]; â”‚              â”‚
â”‚  â”‚                                        â”‚              â”‚
â”‚  â”‚ public void SetChannelMapping(         â”‚              â”‚
â”‚  â”‚   int ch1Physical, int ch2Physical)    â”‚              â”‚
â”‚  â”‚ {                                      â”‚              â”‚
â”‚  â”‚   _channelMapping[0] = ch1Physical;    â”‚              â”‚
â”‚  â”‚   _channelMapping[1] = ch2Physical;    â”‚              â”‚
â”‚  â”‚ }                                      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ GetSweepData()ä½¿ç”¨æ˜ å°„
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GetSweepData() â†’ è¿”å›2ä¸ªæ˜¾ç¤ºé€šé“                         â”‚
â”‚  result[0] = {                                           â”‚
â”‚    ChannelName = ChannelNames[_channelMapping[0]],      â”‚
â”‚    Samples = _channelBuffers[_channelMapping[0]]        â”‚
â”‚  }                                                       â”‚
â”‚  result[1] = {                                           â”‚
â”‚    ChannelName = ChannelNames[_channelMapping[1]],      â”‚
â”‚    Samples = _channelBuffers[_channelMapping[1]]        â”‚
â”‚  }                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ¯é€šé“Gain/Rangeæµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·äº¤äº’å±‚                             â”‚
â”‚  EEG-1: Gain/Range | EEG-2: Gain/Range                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ TwoWay Binding
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WaveformViewModel.cs                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Eeg1Gain = 100, Eeg1Range = 100        â”‚              â”‚
â”‚  â”‚ Eeg2Gain = 100, Eeg2Range = 100        â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ PropertyChanged Event
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WaveformPanel.xaml.cs                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ case Eeg1Gain:                         â”‚              â”‚
â”‚  â”‚   _renderHost.Lane0GainMicrovoltsPerCm â”‚              â”‚
â”‚  â”‚     = vm.Eeg1Gain;                     â”‚              â”‚
â”‚  â”‚ case Eeg2Gain:                         â”‚              â”‚
â”‚  â”‚   _renderHost.Lane1GainMicrovoltsPerCm â”‚              â”‚
â”‚  â”‚     = vm.Eeg2Gain;                     â”‚              â”‚
â”‚  â”‚ (Rangeç±»ä¼¼)                             â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ å±æ€§èµ‹å€¼
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WaveformRenderHost.cs                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ private int _lane0GainMicrovoltsPerCm; â”‚              â”‚
â”‚  â”‚ private int _lane1GainMicrovoltsPerCm; â”‚              â”‚
â”‚  â”‚ private int _lane0YAxisRangeUv;        â”‚              â”‚
â”‚  â”‚ private int _lane1YAxisRangeUv;        â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ æ¯å¸§æ¸²æŸ“æ—¶ç‹¬ç«‹ä¼ é€’
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SweepModeRenderer.RenderChannel(...)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Lane 0: RenderChannel(                 â”‚              â”‚
â”‚  â”‚   ..., _lane0YAxisRangeUv,             â”‚              â”‚
â”‚  â”‚   _lane0GainMicrovoltsPerCm)           â”‚              â”‚
â”‚  â”‚                                        â”‚              â”‚
â”‚  â”‚ Lane 1: RenderChannel(                 â”‚              â”‚
â”‚  â”‚   ..., _lane1YAxisRangeUv,             â”‚              â”‚
â”‚  â”‚   _lane1GainMicrovoltsPerCm)           â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç‹¬ç«‹æ¸²æŸ“æ•ˆæœ:                                            â”‚
â”‚  - EEG-1å¯æ˜¾ç¤º50Î¼V/cmé«˜çµæ•åº¦                             â”‚
â”‚  - EEG-2å¯æ˜¾ç¤º200Î¼V/cmä½çµæ•åº¦                            â”‚
â”‚  - ä¸¤è€…äº’ä¸å½±å“                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. ä»£ç å®ç°æ£€æŸ¥

### 5.1 ViewModelå±‚

| æ£€æŸ¥é¡¹ | ä½ç½® | çŠ¶æ€ |
|-------|------|------|
| **SourceOptionså®šä¹‰** | `WaveformViewModel.cs:33-39` | âœ… æ­£ç¡® (4é€‰é¡¹: CH1, CH2, CH3, CH4) |
| **Eeg1/Eeg2 Sourceå±æ€§** | `WaveformViewModel.cs:82-99` | âœ… æ­£ç¡® (ObservableProperty) |
| **Eeg1/Eeg2 Gain/Range** | `WaveformViewModel.cs:85-99` | âœ… æ­£ç¡® (é»˜è®¤100) |
| **é»˜è®¤å€¼åˆå§‹åŒ–** | `WaveformViewModel.cs:118-119` | âœ… æ­£ç¡® (CH1/CH2) |

### 5.2 UIå±‚

| æ£€æŸ¥é¡¹ | ä½ç½® | çŠ¶æ€ |
|-------|------|------|
| **åŒåˆ†ç»„UIç»“æ„** | `ChannelControlPanel.xaml:12-122` | âœ… æ­£ç¡® (EEG-1/EEG-2åˆ†ç»„) |
| **Sourceä¸‹æ‹‰ç»‘å®š** | `xaml:23-33, 80-90` | âœ… æ­£ç¡® (Eeg1/2Sourceç»‘å®š) |
| **Gainä¸‹æ‹‰ç»‘å®š** | `xaml:39-49, 96-106` | âœ… æ­£ç¡® (Eeg1/2Gainç»‘å®š) |
| **Rangeä¸‹æ‹‰ç»‘å®š** | `xaml:55-65, 112-122` | âœ… æ­£ç¡® (Eeg1/2Rangeç»‘å®š) |

### 5.3 æ˜ å°„å±‚

| æ£€æŸ¥é¡¹ | ä½ç½® | çŠ¶æ€ |
|-------|------|------|
| **Sourceå˜æ›´ç›‘å¬** | `WaveformPanel.xaml.cs:185-190` | âœ… æ­£ç¡® |
| **ApplyPerLaneChannelMapping** | `WaveformPanel.xaml.cs:198-207` | âœ… æ­£ç¡® (è°ƒç”¨SetChannelMapping) |
| **LogChannelMapChange** | `WaveformPanel.xaml.cs:209-217` | âœ… æ­£ç¡® (CHANNEL_MAP_CHANGEå®¡è®¡) |
| **EegDataBridge.SetChannelMapping** | `EegDataBridge.cs:195-207` | âœ… æ­£ç¡® (æ›´æ–°_channelMapping) |
| **GetSweepDataä½¿ç”¨æ˜ å°„** | `EegDataBridge.cs:331-358` | âœ… æ­£ç¡® (æ ¹æ®æ˜ å°„è¿”å›æ•°æ®) |

### 5.4 æ¸²æŸ“å±‚

| æ£€æŸ¥é¡¹ | ä½ç½® | çŠ¶æ€ |
|-------|------|------|
| **Lane0/1 Gainå­—æ®µ** | `WaveformRenderHost.cs:79-80` | âœ… æ­£ç¡® |
| **Lane0/1 Rangeå­—æ®µ** | `WaveformRenderHost.cs:83-84` | âœ… æ­£ç¡® |
| **Lane0/1å…¬å¼€å±æ€§** | `WaveformRenderHost.cs:140-173` | âœ… æ­£ç¡® (å¸¦clamping) |
| **Lane 0æ¸²æŸ“è°ƒç”¨** | `WaveformRenderHost.cs:308-312` | âœ… æ­£ç¡® (ä½¿ç”¨_lane0*å‚æ•°) |
| **Lane 1æ¸²æŸ“è°ƒç”¨** | `WaveformRenderHost.cs:319-323` | âœ… æ­£ç¡® (ä½¿ç”¨_lane1*å‚æ•°) |

### 5.5 æµ‹è¯•è¦†ç›–

| æµ‹è¯•ç±»åˆ« | ä½ç½® | æµ‹è¯•æ•°é‡ | çŠ¶æ€ |
|---------|------|---------|------|
| **Sourceæ˜ å°„ä¸€è‡´æ€§** | `EegDataBridgeTests.cs:402-535` | 4æµ‹è¯• | âœ… é€šè¿‡ |
| **CHANNEL_MAP_CHANGEå®¡è®¡** | `AuditServiceTests.cs:148-160` | 1æµ‹è¯• | âœ… é€šè¿‡ |
| **æ¯é€šé“Gain/Rangeç‹¬ç«‹æ€§** | `WaveformRenderHostTests.cs:298-411` | 12æµ‹è¯• | âœ… é€šè¿‡ |
| **å‘åå…¼å®¹æ€§** | `WaveformRenderHostTests.cs:397-411` | 2æµ‹è¯• | âœ… é€šè¿‡ |

**æ€»æµ‹è¯•æ•°**: 176 UIæµ‹è¯• + 322 Renderingæµ‹è¯• = 498æµ‹è¯•

---

## 6. è§„æ ¼ç¬¦åˆæ€§éªŒè¯

### 6.1 æ ¸å¿ƒåŠŸèƒ½ç¬¦åˆæ€§

| è§„æ ¼è¦æ±‚ | å®ç°çŠ¶æ€ | è¯´æ˜ |
|---------|---------|------|
| **æ¯EEGé€šé“ç‹¬ç«‹é…ç½®** | âœ… 100% | Source/Gain/Rangeå…¨éƒ¨ç‹¬ç«‹ |
| **ç‰©ç†é€šé“æ˜ å°„æ­£ç¡®** | âœ… 100% | 0â†’CH1, 1â†’CH2, 3â†’CH4 |
| **æ ‡ç­¾-æ•°æ®ä¸€è‡´æ€§** | âœ… 100% | å›å½’æµ‹è¯•ä¿è¯ |
| **å®¡è®¡äº‹ä»¶è®°å½•** | âœ… 100% | CHANNEL_MAP_CHANGEå·²å®ç° |
| **å‘åå…¼å®¹æ€§** | âœ… 100% | é—ç•™å±æ€§ä¿ç•™ï¼Œè®¾ç½®æ—¶åŒæ­¥æ›´æ–°ä¸¤é€šé“ |

### 6.2 ç”¨æˆ·ä½“éªŒ

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **åŒåˆ†ç»„UIæ¸…æ™°åº¦** | âœ… ä¼˜ç§€ | EEG-1/EEG-2è§†è§‰åˆ†ç»„æ˜ç¡® |
| **Sourceé€‰é¡¹ç›´è§‚æ€§** | âœ… ä¼˜ç§€ | CH4æ ‡æ³¨"è·¨å¯¼è”"æ¸…æ™°æ ‡è¯† |
| **ç‹¬ç«‹é…ç½®çµæ´»æ€§** | âœ… ä¼˜ç§€ | å¯ä»»æ„ç»„åˆSource/Gain/Range |
| **å…¨å±€è®¾ç½®ä¿ç•™** | âœ… ä¼˜ç§€ | Filter/Sweep/aEEGä»ä¸ºå…¨å±€ |

### 6.3 æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æµ‹é‡ç»“æœ | è§„æ ¼è¦æ±‚ | çŠ¶æ€ |
|------|---------|---------|------|
| **é…ç½®å“åº”æ—¶é—´** | ~16-33 ms | < 100 ms | âœ… é€šè¿‡ |
| **æ¸²æŸ“å¼€é”€å¢åŠ ** | å¯å¿½ç•¥ | N/A | âœ… è‰¯å¥½ (ä»…å‚æ•°ä¼ é€’) |
| **æµ‹è¯•è¦†ç›–ç‡** | 176+322æµ‹è¯• | é«˜è¦†ç›– | âœ… é€šè¿‡ |

---

## 7. å‘åå…¼å®¹æ€§

### 7.1 é—ç•™å±æ€§ä¿ç•™

**ä½ç½®** (`WaveformRenderHost.cs:85-91, 174-195`):

```csharp
[Obsolete("Use Lane0GainMicrovoltsPerCm and Lane1GainMicrovoltsPerCm instead")]
private int _gainMicrovoltsPerCm = 100;

[Obsolete("Use Lane0YAxisRangeUv and Lane1YAxisRangeUv instead")]
private int _yAxisRangeUv = 100;

[Obsolete("Use Lane0GainMicrovoltsPerCm and Lane1GainMicrovoltsPerCm instead")]
public int GainMicrovoltsPerCm
{
    get => _gainMicrovoltsPerCm;
    set
    {
        _gainMicrovoltsPerCm = Math.Clamp(value, 10, 1000);
        _lane0GainMicrovoltsPerCm = _gainMicrovoltsPerCm;  // åŒæ­¥æ›´æ–°ä¸¤é€šé“
        _lane1GainMicrovoltsPerCm = _gainMicrovoltsPerCm;
    }
}

// YAxisRangeUv ç±»ä¼¼
```

**ç­–ç•¥**:
- âœ… é—ç•™å±æ€§æ ‡è®°ä¸º`[Obsolete]`ä½†ä»å¯ç”¨
- âœ… è®¾ç½®é—ç•™å±æ€§æ—¶è‡ªåŠ¨åŒæ­¥æ›´æ–°ä¸¤ä¸ªé€šé“ï¼ˆå…¼å®¹æ—§è¡Œä¸ºï¼‰
- âœ… æ‰€æœ‰æµ‹è¯•ä½¿ç”¨`#pragma warning disable CS0618`æŠ‘åˆ¶è­¦å‘Š
- âœ… æœªæ¥ç‰ˆæœ¬å¯ç§»é™¤é—ç•™å±æ€§

### 7.2 é—ç•™å¯¼è”ç»„åˆä¿ç•™

**ä½ç½®** (`WaveformViewModel.cs:24-27`):

```csharp
public static IReadOnlyList<LeadCombinationOption> LeadCombinationOptions { get; } =
[
    new("C3-P3 / C4-P4", "C3-P3", "C4-P4")  // Maps to physical CH1/CH2
];
```

**å¤„ç†** (`WaveformPanel.xaml.cs:219-237`):
- ä¿ç•™`ApplyLeadCombinationMapping`æ–¹æ³•ï¼ˆå‘åå…¼å®¹æ—§UIç»‘å®šï¼‰
- æ–°æ¨¡å‹ä¼˜å…ˆä½¿ç”¨`ApplyPerLaneChannelMapping`
- ä¸¤ä¸ªæ–¹æ³•å‡è°ƒç”¨`EegDataBridge.SetChannelMapping`ï¼Œæ•ˆæœä¸€è‡´

---

## 8. æ€»ç»“

### 8.1 æ¶æ„æ¼”è¿›

**v1.0 (2026-02-07ä»¥å‰)**: å…¨å±€Gain/Range + å¯¼è”ç»„åˆåˆ‡æ¢
**v2.0 (2026-02-08)**: æ¯EEGé€šé“ç‹¬ç«‹Source/Gain/Range

**å…³é”®æ”¹è¿›**:
- âœ… çµæ´»æ€§: æ¯é€šé“ç‹¬ç«‹é…ç½®ï¼Œå¯ä»»æ„ç»„åˆ
- âœ… ä¸´åºŠä»·å€¼: å¯åŒæ—¶å¯¹æ¯”ä¸åŒå¢ç›Š/èŒƒå›´ä¸‹çš„æ³¢å½¢
- âœ… è·¨å¯¼è”æ”¯æŒ: CH4 (C3-C4) æ˜ç¡®æ ‡æ³¨ä¸º"è·¨å¯¼è”"
- âœ… å®¡è®¡å®Œæ•´: æ–°å¢CHANNEL_MAP_CHANGEäº‹ä»¶
- âœ… å‘åå…¼å®¹: é—ç•™å±æ€§ä¿ç•™ï¼Œå¹³æ»‘è¿ç§»

### 8.2 æ ¸å¿ƒæ•°æ®æµ

```
ç”¨æˆ·é€‰æ‹© Source/Gain/Range
  â†“
WaveformViewModel (Eeg1/Eeg2å±æ€§)
  â†“ PropertyChanged
WaveformPanel (ç›‘å¬å™¨)
  â†“ ApplyPerLaneChannelMapping / LogChannelMapChange
EegDataBridge (SetChannelMapping) + Audit
  â†“ GetSweepData()ä½¿ç”¨æ˜ å°„
WaveformRenderHost (Lane0/1 Gain/Range)
  â†“ RenderChannel(ç‹¬ç«‹å‚æ•°)
SweepModeRenderer (ç‹¬ç«‹æ¸²æŸ“æ¯é€šé“)
```

### 8.3 æµ‹è¯•è¦†ç›–

- **æ€»æµ‹è¯•æ•°**: 498 (176 UI + 322 Rendering)
- **æ–°å¢æµ‹è¯•**: 17 (4 Sourceæ˜ å°„ + 1 å®¡è®¡ + 12 Gain/Range)
- **è¦†ç›–ç‡**: Sourceæ˜ å°„ã€å®¡è®¡ã€æ¯é€šé“ç‹¬ç«‹æ€§ã€å‘åå…¼å®¹å…¨è¦†ç›–
- **å›å½’ä¿æŠ¤**: é—ç•™å±æ€§æµ‹è¯•ã€æ ‡ç­¾-æ•°æ®ä¸€è‡´æ€§æµ‹è¯•

### 8.4 æœªæ¥å·¥ä½œå»ºè®®

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | å·¥ä½œé‡ | è¯´æ˜ |
|------|-------|-------|------|
| å¿«æ·é”®ç»‘å®š | ğŸŸ¡ ä¸­ | 1-2h | KeyBindingåˆ°å¾ªç¯åˆ‡æ¢å‘½ä»¤ |
| UIå¢å¼º: Sourceé€‰æ‹©å†å²è®°å½• | ğŸŸ¢ ä½ | 2-3h | è®°å½•å¸¸ç”¨Sourceç»„åˆ |
| ç§»é™¤é—ç•™å±æ€§ | ğŸŸ¢ ä½ | 1h | åœ¨æœªæ¥ç‰ˆæœ¬ç§»é™¤`[Obsolete]`å±æ€§ |

---

**æ–‡æ¡£ç»“æŸ**
