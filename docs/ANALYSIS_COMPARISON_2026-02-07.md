# é€šé“ä¸å¢ç›Šé€»è¾‘åˆ†æå¯¹æ¯”

> **å¯¹æ¯”æ—¥æœŸ**: 2026-02-07
> **å¯¹æ¯”å¯¹è±¡**: Claude åˆæ­¥åˆ†æ vs ç”¨æˆ·è¯¦ç»†ä»£ç æ£€æŸ¥
> **ç»“è®º**: ç”¨æˆ·æ£€æŸ¥å‘ç°äº† Claude åˆ†æçš„**é‡å¤§ç–æ¼**

---

## âŒ Claude åˆ†æçš„ä¸¥é‡é”™è¯¯

### é”™è¯¯ 1: å¢ç›Šè®¾ç½®é€»è¾‘ - å®Œå…¨é”™è¯¯çš„ç»“è®º

**Claude çš„é”™è¯¯ç»“è®º**:
> âœ… å¢ç›Šè®¾ç½®é€»è¾‘å®Œå…¨æ­£ç¡®
> âœ… ç¬¦åˆè§„æ ¼: 100%
> âœ… æ•°æ®æµå®Œæ•´: UI â†’ ViewModel â†’ RenderHost â†’ Renderer

**çœŸå®æƒ…å†µï¼ˆç”¨æˆ·å‘ç°ï¼‰**:

```
âŒ å‚æ•°é“¾è·¯é€šäº†ï¼Œä½†æ¸²æŸ“ç”Ÿæ•ˆé“¾è·¯æ²¡é—­ç¯

æ•°æ®æµå®é™…æƒ…å†µï¼š
UI â†’ ViewModel â†’ RenderHost.GainMicrovoltsPerCm âœ… (ä¿å­˜äº†)
RenderHost.GainMicrovoltsPerCm â†’ ??? âŒ (æ²¡æœ‰ä¼ é€’ç»™å®é™…æ¸²æŸ“å™¨)

å½“å‰å®é™…æ¸²æŸ“å™¨ï¼šEegPreviewRenderer
- ç­¾å: Render(context, resources, area, rangeUv, sweepData)
- å‚æ•°åˆ—è¡¨ä¸­ **å®Œå…¨æ²¡æœ‰ gain å‚æ•°**
- ç¼©æ”¾å…¬å¼: uvToPixelScale = (areaHeight / (2.0f * rangeUv)) * 0.7f
              â†‘ ç¡¬ç¼–ç  0.7ï¼Œæ²¡æœ‰ä½¿ç”¨ gainFactor

SweepModeRenderer (è¢«æ„é€ ä½†æœªä½¿ç”¨):
- ç­¾å: RenderChannel(..., gainMicrovoltsPerCm) â† æœ‰ gain å‚æ•°
- ä½ç½®: WaveformRenderHost.cs:51 (åªæ˜¯å­—æ®µï¼Œä»æœªè°ƒç”¨)
- WaveformRenderHost ä¸­æ²¡æœ‰ä»»ä½• _sweepRenderer.RenderChannel() è°ƒç”¨
```

**ä»£ç è¯æ®**:

| ä½ç½® | ä»£ç  | è¯´æ˜ |
|------|------|------|
| `WaveformRenderHost.cs:51` | `private readonly SweepModeRenderer _sweepRenderer;` | âœ… æ„é€ äº†ä½†ä»æœªä½¿ç”¨ |
| `WaveformRenderHost.cs:311` | `_eegPreviewRenderer.Render(...)` | âŒ å®é™…ä½¿ç”¨çš„æ˜¯ Preview æ¸²æŸ“å™¨ |
| `EegPreviewRenderer.cs:33-38` | `public void Render(..., int rangeUv, ...)` | âŒ ç­¾åä¸­æ²¡æœ‰ gain å‚æ•° |
| `EegPreviewRenderer.cs:73` | `uvToPixelScale = ... * 0.7f` | âŒ ç¡¬ç¼–ç ç¼©æ”¾ï¼Œä¸ä½¿ç”¨ gain |

**grep éªŒè¯ç»“æœ**:
```bash
$ grep -n "_sweepRenderer.Render" WaveformRenderHost.cs
(æ— ç»“æœ)

$ grep -n "RenderChannel" WaveformRenderHost.cs
(æ— ç»“æœ)
```

**å®é™…å½±å“**:
- ç”¨æˆ·åœ¨ UI ä¿®æ”¹å¢ç›Š 10/20/50/70/100/200/1000 Î¼V/cm
- `WaveformViewModel.SelectedGain` æ­£ç¡®æ›´æ–° âœ…
- `WaveformRenderHost.GainMicrovoltsPerCm` æ­£ç¡®åŒæ­¥ âœ…
- **ä½†æ³¢å½¢è§†è§‰æ•ˆæœå®Œå…¨ä¸å˜** âŒ
- å¢ç›Šå‚æ•°è¢«ä¿å­˜ä½†ä»æœªåº”ç”¨åˆ°å®é™…æ¸²æŸ“

---

### é”™è¯¯ 2: é€šé“è®¾ç½®é€»è¾‘ - éƒ¨åˆ†æ­£ç¡®ä½†ä¸å®Œæ•´

**Claude çš„ç»“è®º**:
> âš ï¸ å¯¼è”åˆ‡æ¢åªæ›´æ–°æ ‡ç­¾ï¼Œä¸å½±å“å®é™…æ•°æ®
> âŒ ç¼ºå°‘å¯¼è”åˆ°ç‰©ç†é€šé“çš„æ˜ å°„é€»è¾‘

**ç”¨æˆ·éªŒè¯**: âœ… **è¿™ä¸ªç»“è®ºæ˜¯æ­£ç¡®çš„**

**ä»£ç è¯æ®**:

| ä½ç½® | ä»£ç  | è¯´æ˜ |
|------|------|------|
| `EegDataBridge.cs:63` | `["CH1 (C3-P3)", "CH2 (C4-P4)", ...]` | å›ºå®šé€šé“å |
| `EegDataBridge.cs:327` | `ChannelName = ChannelNames[ch]` | å§‹ç»ˆä½¿ç”¨å›ºå®šç´¢å¼• |
| `WaveformRenderHost.cs:309, 320` | `sweepData[0]`, `sweepData[1]` | å§‹ç»ˆæ¸²æŸ“å‰ 2 ä¸ªé€šé“ |

**Claude çš„å»ºè®®ä¿®å¤æ–¹æ¡ˆ**: åœ¨ `EegDataBridge` æ·»åŠ é€šé“æ˜ å°„é€»è¾‘

**ç”¨æˆ·åé¦ˆ**: (æœªæ˜ç¡®è¯„ä»·ï¼Œä½†äº‹å®éªŒè¯äº†é—®é¢˜å­˜åœ¨)

---

### é”™è¯¯ 3: NIRS é€šé“é…ç½® - å¼•å…¥äº†æ–°çš„ä¸ä¸€è‡´

**Claude çš„ä¿®æ”¹** (`commit 6c7e298`):
```csharp
// NirsPanelController.cs:48
_viewModel.SetChannelState(i, i <= 4 ? NirsChannelState.Unknown : NirsChannelState.Blocked);
//                                â†‘ æ”¹ä¸º 4

// NirsPanelController.cs:226
if (i > 4) { ... }
//      â†‘ æ”¹ä¸º 4
```

**ç”¨æˆ·å‘ç°çš„é—®é¢˜**:

```
NIRS é€šé“é»˜è®¤å¯ç”¨é…ç½® (NirsViewModel.cs:70):
  new NirsChannelViewModel(i, i <= 3)
  â†‘ CH1-CH3 é»˜è®¤å¯ç”¨ï¼ŒCH4-CH6 é»˜è®¤ç¦ç”¨

Claude çš„æ¨¡æ‹Ÿé€»è¾‘ä¿®æ”¹:
  i <= 4 ? Unknown : Blocked
  â†‘ CH1-CH4 æ¨¡æ‹Ÿï¼ŒCH5-CH6 Blocked

æµ‹è¯•æœŸæœ› (NirsPanelControllerTests.cs:22):
  Channels[3].StatusText == "Blocked"  â† CH4 åº”è¯¥æ˜¯ Blocked
  â†‘ å› ä¸º CH4 é»˜è®¤æœªå¯ç”¨

ç»“è®ºï¼šClaude çš„ä¿®æ”¹ä¸é»˜è®¤é…ç½®å†²çª
```

**å½±å“**:
- å¦‚æœ CH4 é»˜è®¤ç¦ç”¨ (`isEnabled = false`)
- ä½†æ¨¡æ‹Ÿé€»è¾‘å°è¯•è®¾ç½®ä¸º `Unknown` å¹¶æ˜¾ç¤ºç™¾åˆ†æ¯”
- æœ€ç»ˆ CH4 åº”è¯¥æ˜¾ç¤º "Blocked"ï¼ˆå› ä¸ºè¢«ç¦ç”¨ï¼‰
- **ä½†ç”¨æˆ·è¦æ±‚çš„æ˜¯ "CH1-CH4 æ˜¾ç¤ºæ¨¡æ‹Ÿç™¾åˆ†æ¯”"**
- **è¿™æ„å‘³ç€éœ€è¦åŒæ—¶ä¿®æ”¹é»˜è®¤å¯ç”¨é…ç½®**

---

## âœ… Claude åˆ†ææ­£ç¡®çš„éƒ¨åˆ†

### 1. å¢ç›Šæ¡£ä½å®šä¹‰

**Claude**: âœ… 7 æ¡£: 10/20/50/70/100/200/1000 Î¼V/cmï¼Œé»˜è®¤ 100
**éªŒè¯**: `WaveformViewModel.cs:21, 38` - å®Œå…¨æ­£ç¡®

### 2. å¢ç›Š UI ç»‘å®š

**Claude**: âœ… TwoWay ç»‘å®šï¼Œæ ¼å¼åŒ–æ˜¾ç¤º
**éªŒè¯**: `ChannelControlPanel.xaml:46-47` - å®Œå…¨æ­£ç¡®

### 3. å¢ç›Šå®¡è®¡äº‹ä»¶

**Claude**: âœ… `GAIN_CHANGE` äº‹ä»¶è®°å½•
**éªŒè¯**: `WaveformViewModel.cs:97` - å®Œå…¨æ­£ç¡®

### 4. å¢ç›Šå‚æ•°ä¼ é€’åˆ° RenderHost

**Claude**: âœ… PropertyChanged å®æ—¶åŒæ­¥
**éªŒè¯**: `WaveformPanel.xaml.cs:148` - å®Œå…¨æ­£ç¡®

**ä½†è‡´å‘½é—®é¢˜**: RenderHost æ”¶åˆ°å‚æ•°å**æ²¡æœ‰ä¼ é€’ç»™å®é™…ä½¿ç”¨çš„æ¸²æŸ“å™¨**

---

## ğŸ“Š å¯¹æ¯”æ€»ç»“è¡¨

| æ£€æŸ¥é¡¹ | Claude ç»“è®º | ç”¨æˆ·éªŒè¯ | æ­£ç¡®æ€§ | ä¸¥é‡ç¨‹åº¦ |
|-------|------------|---------|--------|---------|
| **å¢ç›Šæ¡£ä½å®šä¹‰** | âœ… æ­£ç¡® | âœ… ç¡®è®¤ | âœ… æ­£ç¡® | - |
| **å¢ç›Š UI ç»‘å®š** | âœ… æ­£ç¡® | âœ… ç¡®è®¤ | âœ… æ­£ç¡® | - |
| **å¢ç›Šå®¡è®¡** | âœ… æ­£ç¡® | âœ… ç¡®è®¤ | âœ… æ­£ç¡® | - |
| **å¢ç›Š UIâ†’Host** | âœ… æ­£ç¡® | âœ… ç¡®è®¤ | âœ… æ­£ç¡® | - |
| **å¢ç›Š Hostâ†’Renderer** | âœ… **å£°ç§°æ­£ç¡®** | âŒ **æœªå®ç°** | âŒ **ä¸¥é‡é”™è¯¯** | ğŸ”´ **è‡´å‘½** |
| **å¢ç›Šæ¸²æŸ“åº”ç”¨** | âœ… **å£°ç§°æ­£ç¡®** | âŒ **æœªç”Ÿæ•ˆ** | âŒ **ä¸¥é‡é”™è¯¯** | ğŸ”´ **è‡´å‘½** |
| **å¢ç›Šå“åº”æ—¶é—´** | âœ… ~16-33 ms | âš ï¸ **æ— æ„ä¹‰** | âš ï¸ å‚æ•°æœªåº”ç”¨ | ğŸ”´ é«˜ |
| **å¢ç›Šç¬¦åˆè§„æ ¼** | âœ… **100%** | âŒ **0%** | âŒ **å®Œå…¨é”™è¯¯** | ğŸ”´ **è‡´å‘½** |
| | | | | |
| **å¯¼è”ç»„åˆå®šä¹‰** | âœ… æ­£ç¡® | âœ… ç¡®è®¤ | âœ… æ­£ç¡® | - |
| **å¯¼è” UI ç»‘å®š** | âœ… æ­£ç¡® | âœ… ç¡®è®¤ | âœ… æ­£ç¡® | - |
| **å¯¼è”æ•°æ®æ˜ å°„** | âŒ æœªå®ç° | âœ… ç¡®è®¤æœªå®ç° | âœ… æ­£ç¡®è¯†åˆ« | ğŸŸ¡ ä¸­ |
| | | | | |
| **NIRS CH1-CH4 æ¨¡æ‹Ÿ** | âœ… **ä¿®æ”¹å®Œæˆ** | âš ï¸ **ä¸é»˜è®¤é…ç½®å†²çª** | âŒ **å¼•å…¥ä¸ä¸€è‡´** | ğŸŸ  ä¸­é«˜ |
| **NIRS é»˜è®¤å¯ç”¨** | âš« **æœªæ£€æŸ¥** | âš ï¸ CH1-CH3 å¯ç”¨ | âŒ **é—æ¼æ£€æŸ¥** | ğŸŸ  ä¸­é«˜ |

---

## ğŸ” æ ¹æœ¬åŸå› åˆ†æ

### Claude åˆ†æå¤±è´¥çš„åŸå› 

1. **è¿‡åº¦ä¾èµ–ä»£ç ç»“æ„ï¼Œå¿½ç•¥å®é™…è°ƒç”¨é“¾**
   - çœ‹åˆ° `_sweepRenderer` å­—æ®µå­˜åœ¨ â†’ å‡è®¾è¢«ä½¿ç”¨
   - çœ‹åˆ° `RenderChannel(gainMicrovoltsPerCm)` ç­¾å â†’ å‡è®¾è¢«è°ƒç”¨
   - **æ²¡æœ‰éªŒè¯ Render æ–¹æ³•çš„å®é™…è°ƒç”¨è·¯å¾„**

2. **æ²¡æœ‰ grep éªŒè¯å…³é”®è°ƒç”¨**
   - åº”è¯¥ grep `_sweepRenderer.Render` â†’ ä¼šå‘ç°æ— ç»“æœ
   - åº”è¯¥ grep `RenderChannel` â†’ ä¼šå‘ç°æ— è°ƒç”¨

3. **æ²¡æœ‰è¿½è¸ªå®é™…æ¸²æŸ“å™¨**
   - åªçœ‹åˆ°æ„é€ äº† `SweepModeRenderer`
   - **æ²¡æœ‰å‘ç°å®é™…ä½¿ç”¨çš„æ˜¯ `EegPreviewRenderer`**
   - **æ²¡æœ‰æ£€æŸ¥ `EegPreviewRenderer.Render()` çš„ç­¾å**

4. **æµ‹è¯•é€šè¿‡ â‰  åŠŸèƒ½æ­£ç¡®**
   - çœ‹åˆ° 60/60 æµ‹è¯•é€šè¿‡ â†’ å‡è®¾åŠŸèƒ½å®Œæ•´
   - **æ²¡æœ‰æ„è¯†åˆ°æµ‹è¯•åªè¦†ç›–"å±æ€§ã€å®¡è®¡ã€çŠ¶æ€"**
   - **æµ‹è¯•æœªè¦†ç›–"è§†è§‰æ¸²æŸ“æ•ˆæœ"**

### ç”¨æˆ·æ£€æŸ¥çš„ä¼˜åŠ¿

1. âœ… **è¿½è¸ªå®é™…è°ƒç”¨é“¾**
   - æ˜ç¡®æŒ‡å‡º `WaveformRenderHost` æ²¡æœ‰è°ƒç”¨ `_sweepRenderer`
   - è¯†åˆ«å‡ºå®é™…ä½¿ç”¨çš„æ˜¯ `_eegPreviewRenderer`

2. âœ… **éªŒè¯å‚æ•°ä¼ é€’çš„å®Œæ•´æ€§**
   - ä¸ä»…çœ‹å‚æ•°å®šä¹‰ï¼Œè¿˜çœ‹å‚æ•°æ˜¯å¦çœŸçš„è¢«ä½¿ç”¨
   - å‘ç° `EegPreviewRenderer` ç­¾åä¸­æ²¡æœ‰ gain å‚æ•°

3. âœ… **æ£€æŸ¥é…ç½®ä¸€è‡´æ€§**
   - å‘ç° NIRS æ¨¡æ‹Ÿé€»è¾‘ï¼ˆCH1-CH4ï¼‰ä¸é»˜è®¤å¯ç”¨é…ç½®ï¼ˆCH1-CH3ï¼‰å†²çª
   - è¯†åˆ«å‡ºæµ‹è¯•æœŸæœ›ä¸ä¿®æ”¹åçš„è¡Œä¸ºä¸ç¬¦

---

## ğŸ› ï¸ æ­£ç¡®çš„ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤ 1: å¯ç”¨ SweepModeRenderer å¹¶ä¼ é€’ Gain

**ä½ç½®**: `WaveformRenderHost.cs`

**å½“å‰ä»£ç ** (line 309-312):
```csharp
// EEG Preview Ch1 (5%) - narrow strip with waveform
if (sweepData.Length >= 1)
{
    _eegPreviewRenderer.Render(_renderer.DeviceContext, _resourceCache,
        _layout.EegPreview1, _yAxisRangeUv, sweepData[0]);
}
```

**ä¿®å¤æ–¹æ¡ˆ A: æ›¿æ¢ä¸º SweepModeRenderer**
```csharp
// EEG Preview Ch1 (5%) - narrow strip with waveform
if (sweepData.Length >= 1)
{
    _sweepRenderer.RenderChannel(
        _renderer.DeviceContext,
        _resourceCache,
        sweepData[0],
        _layout.EegPreview1,
        _yAxisRangeUv,
        _gainMicrovoltsPerCm  // â† ä¼ é€’ gain å‚æ•°
    );
}
```

**ä¿®å¤æ–¹æ¡ˆ B: ä¿®æ”¹ EegPreviewRenderer æ·»åŠ  gain å‚æ•°**
```csharp
// EegPreviewRenderer.cs ç­¾åä¿®æ”¹
public void Render(
    ID2D1DeviceContext context,
    ResourceCache resources,
    in Rect area,
    int rangeUv,
    int gainMicrovoltsPerCm,  // â† æ·»åŠ å‚æ•°
    in SweepChannelData sweepData)
{
    // ä¿®æ”¹ line 73
    float gainFactor = 100.0f / Math.Max(1, gainMicrovoltsPerCm);
    float uvToPixelScale = (areaHeight / (2.0f * rangeUv)) * gainFactor;  // ç§»é™¤ç¡¬ç¼–ç  0.7
}
```

**æ¨è**: **æ–¹æ¡ˆ A** - ç›´æ¥ä½¿ç”¨å·²æœ‰çš„ `SweepModeRenderer`

---

### ä¿®å¤ 2: ç»Ÿä¸€ NIRS é€šé“é…ç½®

**é—®é¢˜**: é»˜è®¤å¯ç”¨é…ç½®ï¼ˆCH1-CH3ï¼‰ä¸æ¨¡æ‹Ÿé€»è¾‘ï¼ˆCH1-CH4ï¼‰ä¸ä¸€è‡´

**ä¿®å¤æ–¹æ¡ˆ A: ä¿®æ”¹é»˜è®¤å¯ç”¨é…ç½®**
```csharp
// NirsViewModel.cs:70
Channels.Add(new NirsChannelViewModel(i, i <= 4));  // â† æ”¹ä¸º 4
```

**ä¿®å¤æ–¹æ¡ˆ B: æ¢å¤æ¨¡æ‹Ÿé€»è¾‘ä¸º CH1-CH3**
```csharp
// NirsPanelController.cs:48
_viewModel.SetChannelState(i, i <= 3 ? NirsChannelState.Unknown : NirsChannelState.Blocked);

// NirsPanelController.cs:226
if (i > 3) { ... }
```

**æ¨è**: **æ–¹æ¡ˆ A** - ä¿®æ”¹é»˜è®¤å¯ç”¨é…ç½®ä¸º CH1-CH4ï¼Œç¬¦åˆç”¨æˆ·éœ€æ±‚

---

### ä¿®å¤ 3: å®ç°å¯¼è”æ˜ å°„é€»è¾‘

**ä½ç½®**: `EegDataBridge.cs`

**æ·»åŠ æ˜ å°„å­—æ®µ**:
```csharp
private int[] _channelMapping = [0, 1];  // é»˜è®¤ CH1â†’0, CH2â†’1
```

**æ·»åŠ æ˜ å°„æ–¹æ³•**:
```csharp
public void SetChannelMapping(int ch1Physical, int ch2Physical)
{
    _channelMapping[0] = ch1Physical;
    _channelMapping[1] = ch2Physical;
}
```

**ä¿®æ”¹ GetSweepData**:
```csharp
for (int ch = 0; ch < 2; ch++)  // åªè¿”å› 2 ä¸ªæ˜¾ç¤ºé€šé“
{
    int physicalCh = _channelMapping[ch];  // â† ä½¿ç”¨æ˜ å°„
    _cachedSweepData[ch] = new SweepChannelData
    {
        ChannelIndex = ch,
        ChannelName = ChannelNames[ch],
        Samples = _channelBuffers[physicalCh],  // â† æ˜ å°„åçš„é€šé“
        Quality = _qualityBuffers[physicalCh],
        // ...
    };
}
```

**è§¦å‘ä½ç½®** (`WaveformViewModel.cs`):
```csharp
partial void OnSelectedLeadCombinationChanged(LeadCombinationOption? value)
{
    if (value is null) return;

    LeadCh1 = $"CH1: {value.Ch1}";
    LeadCh2 = $"CH2: {value.Ch2}";

    // æ ¹æ®å¯¼è”ç»„åˆè®¾ç½®é€šé“æ˜ å°„
    // è¿™é‡Œéœ€è¦å®šä¹‰å¯¼è”åˆ°ç‰©ç†é€šé“çš„æ˜ å°„è§„åˆ™
    // ç¤ºä¾‹: C3-P3/C4-P4 â†’ [0,1], F3-P3/F4-P4 â†’ [2,3], C3-O1/C4-O2 â†’ [0,3]
}
```

---

## ğŸ“ ä¿®æ­£åçš„ç»“è®º

### å¢ç›Šè®¾ç½®é€»è¾‘

**å®é™…çŠ¶æ€**:
- âŒ **å‚æ•°é“¾è·¯é€šäº†ï¼Œæ¸²æŸ“ç”Ÿæ•ˆé“¾è·¯æ²¡é—­ç¯**
- UI â†’ ViewModel â†’ RenderHost: âœ… æ­£ç¡®
- RenderHost â†’ å®é™…æ¸²æŸ“å™¨: âŒ **æœªä¼ é€’**
- å®é™…æ¸²æŸ“å™¨åº”ç”¨: âŒ **æœªç”Ÿæ•ˆ**

**ç¬¦åˆè§„æ ¼**: âŒ **0%** (å¢ç›ŠåŠŸèƒ½å®Œå…¨ä¸å·¥ä½œ)

**å“åº”æ—¶é—´**: âš ï¸ æ— æ„ä¹‰ï¼ˆå‚æ•°æœªåº”ç”¨åˆ°æ¸²æŸ“ï¼‰

**ä¿®å¤ä¼˜å…ˆçº§**: ğŸ”´ **P0 - è‡´å‘½** (æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨)

### é€šé“è®¾ç½®é€»è¾‘

**å®é™…çŠ¶æ€**:
- âœ… UI ç»‘å®šæ­£ç¡®
- âœ… æ ‡ç­¾æ›´æ–°æ­£ç¡®
- âŒ æ•°æ®æ˜ å°„æœªå®ç°

**ç¬¦åˆè§„æ ¼**: âš ï¸ **60%** (æ˜¾ç¤ºæ­£ç¡®ä½†æ•°æ®æœªåˆ‡æ¢)

**ä¿®å¤ä¼˜å…ˆçº§**: ğŸŸ¡ **P1 - é«˜** (å½±å“ç”¨æˆ·ä½“éªŒ)

### NIRS é€šé“é…ç½®

**å®é™…çŠ¶æ€**:
- âš ï¸ é»˜è®¤å¯ç”¨é…ç½® (CH1-CH3) ä¸ä¿®æ”¹åçš„æ¨¡æ‹Ÿé€»è¾‘ (CH1-CH4) å†²çª
- âš ï¸ æµ‹è¯•æœŸæœ› CH4="Blocked"ï¼Œä½†ä¿®æ”¹åä¼šæ˜¾ç¤ºæ¨¡æ‹Ÿå€¼

**ä¿®å¤ä¼˜å…ˆçº§**: ğŸŸ  **P1 - ä¸­é«˜** (é…ç½®ä¸ä¸€è‡´)

---

## ğŸ¯ å­¦ä¹ ä¸æ”¹è¿›

### Claude éœ€è¦æ”¹è¿›çš„åœ°æ–¹

1. **å¿…é¡»è¿½è¸ªå®é™…è°ƒç”¨é“¾ï¼Œè€Œéå‡è®¾**
   - çœ‹åˆ°å­—æ®µå®šä¹‰ â‰  è¢«ä½¿ç”¨
   - çœ‹åˆ°å‚æ•°å®šä¹‰ â‰  è¢«ä¼ é€’
   - **å¿…é¡» grep éªŒè¯å…³é”®è°ƒç”¨**

2. **å¿…é¡»æ£€æŸ¥å®é™…æ¸²æŸ“å™¨çš„ç­¾å**
   - ä¸èƒ½åªçœ‹ç†æƒ³çš„æ¸²æŸ“å™¨ï¼ˆSweepModeRendererï¼‰
   - **å¿…é¡»æ‰¾åˆ°å®é™…ä½¿ç”¨çš„æ¸²æŸ“å™¨**ï¼ˆEegPreviewRendererï¼‰
   - **å¿…é¡»éªŒè¯ç­¾åå‚æ•°**

3. **æµ‹è¯•é€šè¿‡ä¸ä»£è¡¨åŠŸèƒ½å®Œæ•´**
   - å¿…é¡»åˆ†ææµ‹è¯•è¦†ç›–èŒƒå›´
   - 60/60 é€šè¿‡åªè¯´æ˜å±æ€§é€»è¾‘æ­£ç¡®
   - **ä¸èƒ½å‡è®¾è§†è§‰æ¸²æŸ“æ•ˆæœæ­£ç¡®**

4. **é…ç½®ä¸€è‡´æ€§æ£€æŸ¥**
   - ä¿®æ”¹ä¸€å¤„é€»è¾‘æ—¶å¿…é¡»æ£€æŸ¥ç›¸å…³é…ç½®
   - NIRS æ¨¡æ‹Ÿé€»è¾‘ä¿®æ”¹ â†’ å¿…é¡»æ£€æŸ¥é»˜è®¤å¯ç”¨é…ç½®
   - **å¿…é¡»æ£€æŸ¥æµ‹è¯•æœŸæœ›**

### ç”¨æˆ·æ£€æŸ¥çš„ä¼˜ç§€å®è·µ

1. âœ… å®Œæ•´çš„è°ƒç”¨é“¾è¿½è¸ª
2. âœ… å®é™…ä»£ç ä½ç½®å¼•ç”¨ï¼ˆå¸¦è¡Œå·ï¼‰
3. âœ… é…ç½®ä¸€è‡´æ€§éªŒè¯
4. âœ… æµ‹è¯•è¦†ç›–èŒƒå›´åˆ†æ
5. âœ… æ˜ç¡®æŒ‡å‡º"å‚æ•°é“¾è·¯é€šäº†ï¼Œæ¸²æŸ“é“¾è·¯æ²¡é—­ç¯"

---

**æ–‡æ¡£ç»“æŸ**

**æ ¸å¿ƒæ•™è®­**:
- **ä»£ç ç»“æ„ â‰  ä»£ç è¡Œä¸º**
- **å‚æ•°ä¼ é€’ â‰  å‚æ•°åº”ç”¨**
- **æµ‹è¯•é€šè¿‡ â‰  åŠŸèƒ½å®Œæ•´**
- **å¿…é¡»è¿½è¸ªå®é™…è°ƒç”¨é“¾ï¼Œå¿…é¡» grep éªŒè¯å…³é”®è·¯å¾„**
