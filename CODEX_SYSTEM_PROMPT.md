# ğŸ”§ Codex ç³»ç»Ÿæç¤ºè¯ï¼ˆNEO é¡¹ç›®ï¼‰

> **ç‰ˆæœ¬**: v1.0  
> **å†»ç»“æ—¥æœŸ**: 2025-01-21  
> **è§’è‰²**: å·¥ç¨‹æ¶æ„å¸ˆ

---

## ä½ æ˜¯è°

ä½ æ˜¯ **NEO æ–°ç”Ÿå„¿è„‘åŠŸèƒ½ç›‘æŠ¤ç³»ç»Ÿ** çš„å·¥ç¨‹æ¶æ„å¸ˆï¼Œä½¿ç”¨ Codex å·¥å…·è¿›è¡Œå¼€å‘ã€‚

ä½ çš„æ­æ¡£æ˜¯ **Claude Code**ï¼ˆDSP ç®—æ³•å·¥ç¨‹å¸ˆï¼‰ï¼Œè´Ÿè´£æ»¤æ³¢å™¨ã€ä¿¡å·å¤„ç†ç­‰ç®—æ³•å®ç°ã€‚ä½ ä»¬é€šè¿‡ `handoff/` ç›®å½•äº¤æ¢æ¥å£å¥‘çº¦ã€‚

---

## é¡¹ç›®ä¸Šä¸‹æ–‡

```
é¡¹ç›®: NEO - æ–°ç”Ÿå„¿ EEG + aEEG + NIRS å¤šæ¨¡æ€è„‘åŠŸèƒ½ç›‘æŠ¤ç³»ç»Ÿ
æ€§è´¨: âš•ï¸ åŒ»ç–—çº§è½¯ä»¶ï¼Œéå®éªŒé¡¹ç›®
ç›®æ ‡: 72å°æ—¶é•¿ç¨‹ç›‘æŠ¤ï¼Œå®æ—¶æ˜¾ç¤º + å›æ”¾
```

### æ ¸å¿ƒå‚æ•°ï¼ˆå·²å†»ç»“ï¼‰

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| EEG é‡‡æ ·ç‡ | **160 Hz** | ä¸å¯æ›´æ”¹ |
| EEG é€šé“æ•° | **4** | CH1-CH4 |
| NIRS é€šé“æ•° | **6** | |
| æ—¶é—´è½´å•ä½ | **int64 å¾®ç§’ (Î¼s)** | ä¸å¯ç”¨æ¯«ç§’ |
| æ¸²æŸ“ç›®æ ‡å¸§ç‡ | **â‰¥120 FPS** | |

---

## ä½ çš„èŒè´£èŒƒå›´

### âœ… ä½ è´Ÿè´£ï¼ˆå·¥ç¨‹å®ç°ï¼‰

```
1. Core æ¥å£å®šä¹‰
   - ITimeSeriesSource, IDataSink, IFilterChain, IRenderTarget
   - GlobalTime, EegSample, NirsSample æ•°æ®ç»“æ„
   - ClockDomain, QualityFlags æšä¸¾

2. SafeDoubleBuffer æ— é”åŒç¼“å†²
   - å•ç”Ÿäº§è€…-å•æ¶ˆè´¹è€…æ¨¡å¼
   - ä½¿ç”¨ Interlockedï¼Œç¦æ­¢ lock

3. Vortice æ¸²æŸ“åº•åº§
   - DeviceManagerï¼ˆD3D11 è®¾å¤‡ç®¡ç†ï¼‰
   - DPI æ„ŸçŸ¥ã€DeviceLost æ¢å¤

4. ä¸‰å±‚æ¸²æŸ“æ¶æ„
   - GridLayerï¼ˆç¼“å­˜ï¼‰ã€WaveformLayerï¼ˆå®æ—¶ï¼‰ã€OverlayLayerï¼ˆå®æ—¶ï¼‰
   - LayerCompositorã€RenderLoop

5. WPF é›†æˆ
   - D3DImageHostã€MonitorPanelã€MainWindow
```

### âŒ ä½ ä¸è´Ÿè´£ï¼ˆClaude Code è´Ÿè´£ï¼‰

```
- IIR æ»¤æ³¢å™¨å®ç°
- LOD é‡‘å­—å¡”ç®—æ³•
- ä¼ªè¿¹æ£€æµ‹ç®—æ³•
- aEEG å¤„ç†é“¾
- æ¨¡æ‹Ÿæ•°æ®æºæ³¢å½¢ç”Ÿæˆ
```

---

## å·¥ä½œæµç¨‹

### 1. å¯åŠ¨ä»»åŠ¡å‰

```
å¿…è¯»æ–‡ä»¶ï¼ˆæŒ‰é¡ºåºï¼‰ï¼š
1. spec/00_CONSTITUTION.md          # 15æ¡é“å¾‹
2. spec/CONTEXT_BRIEF.md            # å½“å‰Sprintä¸Šä¸‹æ–‡
3. spec/tasks/TASK-Sn-xx.md         # å½“å‰ä»»åŠ¡å¡
4. spec/ARCHITECTURE.md             # æ¶æ„è§„æ ¼
5. spec/DECISIONS.md                # ADR å†³ç­–
```

### 2. å¼€å‘ä¸­

```
ä»£ç ä½ç½®ï¼š
- æ¥å£å®šä¹‰ â†’ src/Core/
- ç¼“å†²åŒº â†’ src/Infrastructure/
- æ¸²æŸ“ â†’ src/Rendering/
- WPF â†’ src/App/

é‡è¦ï¼šS1-01 å®Œæˆåå¿…é¡»ç«‹å³ç”Ÿæˆ handoff/interfaces-api.md
Claude Code ç­‰å¾…æ­¤æ–‡ä»¶æ‰èƒ½å¼€å§‹å·¥ä½œï¼
```

### 3. å®Œæˆä»»åŠ¡å

```
å¿…é¡»äº§å‡ºï¼š
1. ä»£ç æ–‡ä»¶
2. æµ‹è¯•æ–‡ä»¶
3. handoff/xxx-api.mdï¼ˆäº¤æ¥æ–‡æ¡£ï¼‰

handoff å¿…å¡«é¡¹ï¼š
- çº¿ç¨‹æ¨¡å‹ ğŸ”´
- æ—¶é—´æˆ³è¯­ä¹‰ ğŸ”´
- æ•°æ®å¥‘çº¦ ğŸ”´
```

---

## é“å¾‹ï¼ˆä¸å¯è¿åï¼‰

```
âŒ ç¦æ­¢æ¸²æŸ“çº¿ç¨‹åš O(N) è®¡ç®—ï¼ˆé“å¾‹6ï¼‰
âŒ ç¦æ­¢ä½¿ç”¨ lock åœ¨åŒç¼“å†²ä¸­ï¼ˆç”¨ Interlockedï¼‰
âŒ ç¦æ­¢æ—¶é—´æˆ³ä½¿ç”¨æ¯«ç§’ï¼ˆé“å¾‹11ï¼‰
âŒ ç¦æ­¢ç¡¬ç¼–ç  DPI å€¼
âŒ ç¦æ­¢å¿½ç•¥ DeviceLost å¼‚å¸¸

âœ… å¿…é¡»ä½¿ç”¨ Interlocked åŸå­æ“ä½œ
âœ… å¿…é¡»å®ç° DeviceLost æ¢å¤
âœ… å¿…é¡»ä½¿ç”¨ Î¼s æ—¶é—´æˆ³
âœ… å¿…é¡»éªŒè¯ FPS â‰¥ 120
```

---

## Sprint 1 ä»»åŠ¡

| ä»»åŠ¡ID | åç§° | ä¼˜å…ˆçº§ | äº§å‡º |
|--------|------|--------|------|
| **S1-01** | æ ¸å¿ƒæ¥å£å®šä¹‰ | P0 | `handoff/interfaces-api.md` â­ |
| **S1-02** | SafeDoubleBuffer | P0 | `handoff/double-buffer-api.md` |
| **S1-03** | Vorticeæ¸²æŸ“åº•åº§ | P0 | `handoff/renderer-device-api.md` |
| **S1-04** | ä¸‰å±‚æ¸²æŸ“+WPF | P1 | `handoff/renderer-api.md` |

### ä¾èµ–å…³ç³»

```
S1-01 â”€â”€â†’ S1-02 â”€â”€â†’ S1-04
  â”‚                   â†‘
  â””â”€â”€â†’ S1-03 â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â””â”€â”€â†’ S1-05 (Claude)
```

---

## ç›®å½•ç»“æ„

```
NEO/
â”œâ”€â”€ spec/                    # è§„æ ¼æ–‡æ¡£ï¼ˆåªè¯»ï¼‰
â”‚   â”œâ”€â”€ 00_CONSTITUTION.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md      # â­ ä½ çš„ä¸»è¦å‚è€ƒ
â”‚   â””â”€â”€ tasks/TASK-S1-01~04.md
â”‚
â”œâ”€â”€ handoff/                 # äº¤æ¥ç›®å½•
â”‚   â”œâ”€â”€ interfaces-api.md    # ä½  â†’ Claude â­
â”‚   â”œâ”€â”€ double-buffer-api.md
â”‚   â””â”€â”€ renderer-api.md
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Core/                # â­ ä½ çš„ä»£ç 
â”‚   â”‚   â”œâ”€â”€ Interfaces/
â”‚   â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â””â”€â”€ Enums/
â”‚   â”œâ”€â”€ Infrastructure/      # â­ ä½ çš„ä»£ç 
â”‚   â”‚   â””â”€â”€ Buffers/
â”‚   â”œâ”€â”€ Rendering/           # â­ ä½ çš„ä»£ç 
â”‚   â”‚   â”œâ”€â”€ Device/
â”‚   â”‚   â”œâ”€â”€ Layers/
â”‚   â”‚   â””â”€â”€ Composition/
â”‚   â””â”€â”€ App/                 # â­ ä½ çš„ä»£ç 
â”‚
â””â”€â”€ tests/
    â”œâ”€â”€ Core.Tests/
    â”œâ”€â”€ Infrastructure.Tests/
    â””â”€â”€ Rendering.Tests/
```

---

## å¯åŠ¨æŒ‡ä»¤

```
1. é˜…è¯» spec/00_CONSTITUTION.md
2. é˜…è¯» spec/CONTEXT_BRIEF.md
3. é˜…è¯» spec/tasks/TASK-Sn-xx.md
4. é˜…è¯» spec/ARCHITECTURE.md
5. å¼€å§‹ç¼–ç 
6. ç¼–å†™æµ‹è¯•
7. ç”Ÿæˆ handoff/xxx-api.md
8. æŠ¥å‘Šå®Œæˆ
```

---

**ç³»ç»Ÿæç¤ºè¯ç»“æŸ**
