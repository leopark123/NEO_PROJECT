# Checkpoints 目录

> 此目录存放每个功能模块完成后的自检报告  
> **强制要求**：每完成一个功能模块，必须在此生成 CP-xx.md  
> **否则该功能视为未完成**

---

## 命名规则

```
CP-{序号}-{模块名}.md

示例：
CP-01-core-interfaces.md
CP-02-double-buffer.md
CP-03-vortice-renderer.md
```

---

## Checkpoint 模板（必须原样使用）

```markdown
# Checkpoint CP-XX – <模块名称>

## 1. 目标
简述本模块目标（引用冻结文档章节）

---

## 2. 实现状态

| 子项 | 状态 |
|------|------|
| 功能A | ✅ 已实现 |
| 功能B | ❌ 未实现 |
| 功能C | ⚠️ UNKNOWN |

---

## 3. 实现证据（必须）

### 功能A
- **文件**：`src/xxx/yyy.cs`
- **行为**：
  - 使用 int64 微秒时间戳
  - 未使用设备时间戳
- **证据说明**：
  > 通过 Stopwatch.GetTimestamp() 转换为 μs

---

## 4. 未实现 / 不确定项说明

### 功能B（未实现）
- **原因**：缺少 NIRS RS232 字段表
- **影响**：NIRS 实时显示不可用
- **后续动作**：等待设备文档

---

## 5. 约束符合性检查

- [x] 未修改医学算法定义
- [x] 未引入数据库大对象
- [x] 未破坏存储 FIFO 规则

---

## 6. 功能级自检清单（必填）⚠️

```markdown
## Self-Check (Mandatory)

- [ ] 实现是否完全来自文档？（列出文档名+章节）
- [ ] 是否引入任何推测？（如有 → 标记 ADR 或 UNKNOWN）
- [ ] 是否改变已有接口 / 数据结构？
- [ ] 是否影响时间戳一致性？
- [ ] 是否可被回放复现？
- [ ] 是否更新了 PROJECT_STATE.md？
```

---

## 7. 下一步计划

- CP-XX+1：<下一个模块>
```

---

## 自检的硬性要求

| 要求 | 合格示例 | 不合格示例 |
|------|----------|------------|
| 引用具体文件路径 | `src/Core/Time/GlobalClock.cs:L45` | "时间模块" |
| 明确状态 | ✅ 已实现 / ❌ 未实现 / ⚠️ UNKNOWN | "基本完成" |
| 具体证据 | "使用 Stopwatch.GetTimestamp()" | "设计合理" |

---

## 禁止事项

```
❌ 禁止模糊词：合理、通常、应该、大致、基本、一般
❌ 禁止无证据结论："测试通过，功能正常"
❌ 禁止隐藏未实现项（必须显式标注）
❌ 禁止跳过约束符合性检查
```

---

## 状态定义

| 状态 | 含义 | 后续动作 |
|------|------|----------|
| ✅ 已实现 | 有证据证明完成 | 无 |
| ❌ 未实现 | 明确未完成 | 说明原因和影响 |
| ⚠️ UNKNOWN | 不确定是否正确 | 需要确认或测试 |
